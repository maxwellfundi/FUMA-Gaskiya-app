{"version":3,"sources":["../../src/pages/localite/ajouter-pays/ajouter-pays.module.ts","../../src/pages/localite/ajouter-pays/ajouter-pays.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACC;AAajD;IAAA;IAAoC,CAAC;IAAxB,qBAAqB;QAXjC,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,sEAAe;aAChB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,sEAAe,CAAC;aAC1C;YACD,OAAO,EAAE;gBACP,sEAAe;aAChB;SACF,CAAC;OACW,qBAAqB,CAAG;IAAD,4BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;ACfQ;AAC4G;AAC7F;AACa;AAEtE;;;;;GAKG;AAMH;IAeE,yBAAmB,OAAsB,EAAS,UAA6B,EAAS,QAAyB,EAAS,OAAuB,EAAS,QAAwB,EAAS,SAAoB,EAAQ,QAAyB,EAAS,cAA+B,EAAS,WAAwB;QAAtS,YAAO,GAAP,OAAO,CAAe;QAAS,eAAU,GAAV,UAAU,CAAmB;QAAS,aAAQ,GAAR,QAAQ,CAAiB;QAAS,YAAO,GAAP,OAAO,CAAgB;QAAS,aAAQ,GAAR,QAAQ,CAAgB;QAAS,cAAS,GAAT,SAAS,CAAW;QAAQ,aAAQ,GAAR,QAAQ,CAAiB;QAAS,mBAAc,GAAd,cAAc,CAAiB;QAAS,gBAAW,GAAX,WAAW,CAAa;QAZzT,SAAI,GAAQ,EAAE,CAAC;QACf,YAAO,GAAQ,EAAE,CAAC;QAClB,OAAE,GAAQ,EAAE,CAAC;QACb,QAAG,GAAQ,EAAE,CAAC;QACd,eAAU,GAAQ,EAAE,CAAC;QACrB,cAAS,GAAQ,EAAE,CAAC;QAEpB,UAAK,GAAY,KAAK,CAAC;QACvB,YAAO,GAAW,IAAI,CAAC;QACvB,aAAQ,GAAY,KAAK,CAAC;QAC1B,iBAAY,GAAY,KAAK,CAAC;QAI5B,EAAE,EAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,EAAC;YAC5B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YACzB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACvB,CAAC;QAED,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;YACrC,EAAE,EAAC,CAAC,EAAE,EAAE,kEAAU,CAAC,QAAQ,CAAC;YAC5B,GAAG,EAAC,CAAC,EAAE,EAAE,kEAAU,CAAC,QAAQ,CAAC;SAC9B,CAAC,CAAC;IACL,CAAC;IAED,yCAAe,GAAf;QAAA,iBAMC;QALE,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;YAC/C,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC;YACzB,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACjB,sBAAsB;QACxB,CAAC,CAAC;IACL,CAAC;IAED,oHAAoH;IACpH,mCAAS,GAAT;QAEE,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;QAClB,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,IAAI,IAAI,IAAI,MAAM,IAAI,OAAO,IAAI,QAAQ,EAAG,EAAE,CAAC,CAAC;QACrE,IAAI,UAAU,GAAG,GAAG,CAAC,MAAM,CAAC;QAC5B,IAAI,EAAE,GAAG,GAAG,CAAC;QACd,iCAAiC;QACjC,IAAI,WAAW,GAAG,CAAC,CAAC;QACpB,IAAI,IAAI,GAAW,EAAE,CAAC;QACtB,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,WAAW,EAAE;QAC5B,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,IAAI,aAAa,GAAG,CAAC,CAAC;QACtB,IAAI,MAAe,CAAC;QAEpB,EAAE,EAAC,UAAU,IAAI,CAAC,CAAC,EAAC;YAClB,OAAM,WAAW,IAAI,UAAU,EAAC,CAAC;gBAC/B,aAAa,GAAG,WAAW,GAAG,CAAC,CAAC;gBAChC,MAAM,GAAI,KAAK,CAAC;gBAChB,IAAI,GAAG,EAAE,CAAC;gBACV,GAAG,EAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,EAAE,CAAC,EAAE,EAAC,CAAC;oBACnC,IAAI,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAE;gBACpC,CAAC;gBAED,GAAE,CAAC;oBACC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;oBACvC,IAAI,IAAI,GAAG,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,QAAQ,EAAE,CAAE;oBAC9C,CAAC,GAAG,CAAC,CAAC;oBACN,GAAG,EAAC,IAAI,GAAG,GAAC,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,EAAE,EAAC,CAAC;wBAC/C,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;wBAC3B,EAAE,EAAC,EAAE,CAAC,EAAE,KAAK,IAAI,CAAC,WAAW,EAAE,CAAC,EAAC;4BAC/B,MAAM,GAAG,IAAI,CAAC;4BACd,KAAK,CAAE;wBACT,CAAC;wBAAA,IAAI,EAAC;4BACJ,MAAM,GAAG,KAAK,CAAC;wBACjB,CAAC;oBACH,CAAC;oBAED,aAAa,EAAE,CAAC;gBAElB,CAAC,QAAM,MAAM,IAAI,aAAa,GAAG,UAAU,EAAE;gBAC7C,EAAE;gBACF,EAAE,EAAC,aAAa,KAAK,UAAU,IAAI,MAAM,CAAC,EAAC;oBACzC,6CAA6C;oBAC7C,WAAW,EAAE,CAAC;oBAEd,2GAA2G;oBAC3G,EAAE,EAAC,WAAW,GAAG,UAAU,CAAC,EAAC;wBAC3B,8DAA8D;wBAC9D,WAAW,GAAG,CAAC,CAAC;wBAChB,GAAG,GAAG,EAAE,GAAG,WAAW,CAAC,QAAQ,EAAE,CAAC;wBAClC,UAAU,GAAG,GAAG,CAAC,MAAM,CAAC;oBAC1B,CAAC;gBACH,CAAC;gBAAA,IAAI,EAAC;oBACF,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;oBAC7B,KAAK,CAAC;gBAEV,CAAC;YACL,CAAC;QAEH,CAAC;IAEH,CAAC;IAEA,2CAAiB,GAAjB,UAAkB,IAAI;QACrB,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAC,CAAC,EAAE,KAAK;YAC5B,EAAE,EAAC,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC,EAAC;gBACzE,GAAG,GAAG,CAAC,CAAC;YACV,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IAGD,oCAAU,GAAV;QAAA,iBAuGC;QAtGC,EAAE,EAAC,IAAI,CAAC,OAAO,CAAC,EAAC;YACb,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC;YACjC,EAAE,EAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAC;gBACrC,KAAK,CAAC,yCAAyC,CAAC,CAAC;YACnD,CAAC;YAAA,IAAI,EAAC;gBACJ,IAAI,IAAI,GAAG,EAAE,CAAC;gBACd,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;gBACtB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAChB,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;gBACtB,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC;gBACxB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACpB,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG;oBACrD,KAAI,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC;gBAC3B,CAAC,CAAC;gBACF,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;oBAC/B,OAAO,EAAE,uBAAuB;oBAChC,QAAQ,EAAE,KAAK;oBACf,QAAQ,EAAE,IAAI;iBACf,CAAC,CAAC;gBAEH,KAAK,CAAC,OAAO,EAAE,CAAC;gBAChB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBAErB,EAAE,EAAC,CAAC,IAAI,CAAC,YAAY,CAAC,EAAC;oBACrB,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;gBAC1B,CAAC;gBAAA,IAAI,EAAC;oBACJ,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;oBAClB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACvB,CAAC;YACH,CAAC;QACH,CAAC;QAAA,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,QAAQ,CAAC,EAAC;YACtB,IAAI,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;gBACnC,OAAO,EAAE,yCAAyC;aACnD,CAAC,CAAC;YAEH,oBAAoB;YACpB,IAAI,MAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC;YAC/B,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAC,CAAC,EAAE,CAAC;gBACxB,EAAE,EAAC,CAAC,CAAC,EAAE,KAAK,MAAI,CAAC,EAAE,CAAC,EAAC;oBACnB,KAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,MAAI,CAAC;gBACzB,CAAC;YACH,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;YAC9B,0CAA0C;YAC1C,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG;gBACnD,KAAI,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC;YAC7B,CAAC,CAAC;YACA,qDAAqD;YACrD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iBAuCK;YAEL,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;gBAC/B,OAAO,EAAE,qBAAqB;gBAC9B,QAAQ,EAAE,KAAK;gBACf,QAAQ,EAAE,IAAI;aACf,CAAC,CAAC;YACH,KAAK,CAAC,OAAO,EAAE,CAAC;YAEhB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACtB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAEtB,CAAC;IACH,CAAC;IAED,qCAAW,GAAX;QACE,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC;IAChB,CAAC;IAED,sCAAY,GAAZ,UAAa,IAAI;QAEf,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;QAClB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;QACpB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC;QAC3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,EAAE,CAAC;QACzB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;IACvB,CAAC;IAED,uCAAa,GAAb,UAAc,IAAI;QAAlB,iBAsCC;QArCC,IAAI,CAAC,GAAQ,EAAE,CAAC;QAChB,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;YAC/B,KAAK,EAAE,kBAAkB;YACzB,OAAO,EAAE,uCAAuC;YAChD,OAAO,EAAC;gBACN;oBACE,IAAI,EAAE,KAAK;oBACX,OAAO,EAAE,cAAM,cAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,EAAlC,CAAkC;iBAElD;gBACD;oBACE,IAAI,EAAE,KAAK;oBACX,OAAO,EAAE;wBACP,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAC,CAAC,EAAE,CAAC;4BACxB,EAAE,EAAC,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC,EAAC;gCACnB,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;4BAC5B,CAAC;wBACH,CAAC,CAAC,CAAC;wBAEH,KAAI,CAAC,IAAI,CAAC,IAAI,GAAG,KAAI,CAAC,OAAO,CAAC;wBAC9B,0CAA0C;wBAC1C,gDAAgD;wBAChD,KAAI,CAAC,cAAc,CAAC,cAAc,CAAC,KAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG;4BACnD,KAAI,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC;wBAC7B,CAAC,CAAC;wBACF,IAAI,KAAK,GAAG,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;4BAC/B,OAAO,EAAE,oBAAoB;4BAC7B,QAAQ,EAAE,KAAK;4BACf,QAAQ,EAAE,IAAI;yBACf,CAAC,CAAC;wBACH,KAAK,CAAC,OAAO,EAAE,CAAC;oBAClB,CAAC;iBACF;aACF;SACF,CAAC,CAAC;QAEH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAED,iCAAO,GAAP;QACE,EAAE,EAAC,IAAI,CAAC,YAAY,CAAC,EAAC;YACpB,EAAE,EAAC,IAAI,CAAC,KAAK,CAAC,EAAC;gBACb,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;YAC1B,CAAC;YAAA,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,OAAO,CAAC,EAAC;gBACrB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;gBAClB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACvB,CAAC;YAAC,IAAI,EAAC;gBACL,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;gBAClB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACxB,CAAC;QACH,CAAC;QAAA,IAAI,EAAC;YACJ,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;QAC1B,CAAC;IACH,CAAC;IAGH,kCAAQ,GAAR,UAAS,EAAO;QACZ,uCAAuC;QACvC,+BAA+B;QAE/B,wCAAwC;QACxC,IAAI,GAAG,GAAG,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC;QAE1B,yDAAyD;QACzD,EAAE,CAAC,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;YAC5B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAC,IAAI,EAAE,KAAK;gBAC/C,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAClE,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAjTU,eAAe;QAJ3B,wEAAS,CAAC;YACT,QAAQ,EAAE,mBAAmB;WACG;SACjC,CAAC;wBAgByT;OAf9S,eAAe,CAmT3B;IAAD,CAAC;AAAA;SAnTY,eAAe,gB","file":"51.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AjouterPaysPage } from './ajouter-pays';\n\n@NgModule({\n  declarations: [\n    AjouterPaysPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AjouterPaysPage),\n  ],\n  exports: [\n    AjouterPaysPage\n  ]\n})\nexport class AjouterPaysPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/localite/ajouter-pays/ajouter-pays.module.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams, IonicPage, ToastController, LoadingController, AlertController, ViewController, MenuController, Events } from 'ionic-angular';\nimport { Validators, FormBuilder } from '@angular/forms';\nimport { PouchdbProvider } from '../../../providers/pouchdb-provider';\n\n/**\n * Generated class for the AjouterPaysPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-ajouter-pays',\n  templateUrl: 'ajouter-pays.html',\n})\nexport class AjouterPaysPage {\n\n  paysForm: any;\n  pays: any = {};\n  allPays: any = [];\n  id: any = '';\n  nom: any = '';\n  ancien_nom: any = '';\n  ancien_id: any = '';\n\n  liste: boolean = false;\n  ajouter:boolean = true;\n  modifier: boolean = false;\n  gestion_pays: boolean = false;\n \n  constructor(public navCtrl: NavController, public loadingCtl: LoadingController, public alertCtl: AlertController, public menuCtl: MenuController, public viewCtrl: ViewController, public navParams: NavParams,public toastCtl: ToastController, public servicePouchdb: PouchdbProvider, public formBuilder: FormBuilder) {\n    \n    if(this.navParams.data.liste){\n      this.liste = true;\n      this.gestion_pays = true;\n      this.ajouter = false;\n    }\n\n    this.paysForm = this.formBuilder.group({\n      id:['', Validators.required],\n      nom:['', Validators.required],\n    });\n  }\n\n  ionViewDidEnter() {\n     this.servicePouchdb.getDocById('pays').then((pays) => {\n       this.allPays = pays.data;\n       this.pays = pays;\n       //alert(this.pays._id)\n     })\n  }\n\n  //fait la conbinaison de caractere de gauche vers la droite en variant la taille a la recherche d'un code disponible\n  genererID(){\n    \n    let nom = this.nom;\n     nom = nom.replace(' ' || '  ' || '    ' || '     ' || '      ' , '');\n     let taille_nom = nom.length;\n     let an = nom;\n    //taille initiale: deux aractères\n    let taille_code = 2;\n    let code: string = '';\n    this.id = code.toUpperCase()\n    let p = 0;\n    let last_position = 0;\n    let trouve: boolean;\n\n    if(taille_nom >= 2){\n      while(taille_code <= taille_nom){\n        last_position = taille_code - 1;\n        trouve  = false;\n        code = '';\n        for(let i = 0; i < taille_code; i++){\n          code += nom.charAt(i).toString() ;\n        }\n\n        do{\n            code = code.substr(0, code.length - 1);\n            code += nom.charAt(last_position).toString() ;\n            p = 0;\n            for(let pos=0; pos < this.allPays.length; pos++){\n              let op = this.allPays[pos];\n              if(op.id === code.toUpperCase()){\n                trouve = true;\n                break ;\n              }else{\n                trouve = false;\n              }\n            }\n            \n            last_position++;\n\n          }while(trouve && last_position < taille_nom);\n          //\n          if(last_position === taille_nom && trouve){\n            //non disponible, augmenter la taille du code\n            taille_code++;\n        \n            //au cas ou on teste toutes les combinaisons, sant trouver de combinaison disponible, on ajoute des chiffre\n            if(taille_code > taille_nom){\n              //non disponible, augmenter la taille et utiliser des chiffres\n              taille_code = 3;\n              nom = an + '123456789'.toString();\n              taille_nom = nom.length;\n            }\n          }else{\n              this.id = code.toUpperCase();\n              break;\n            \n          }\n      }\n      \n    }\n    \n  }\n\n   verifierUniqueNon(pays){\n    let res = 1;\n    this.allPays.forEach((p, index) => {\n      if((pays.nom.toString().toUpperCase() === p.nom.toString().toUpperCase())){\n        res = 0;\n      }\n    });\n\n    return res;\n  }\n\n\n  actionForm(){\n    if(this.ajouter){\n        let pays = this.paysForm.value;\n      if(this.verifierUniqueNon(pays) === 0){\n        alert('Les noms des pays doivent être uniques!');\n      }else{\n        let data = [];\n        data = this.pays.data;\n        data.push(pays);\n        this.pays.data = data;\n        this.pays.type = 'pays';\n        this.allPays = data;\n        this.servicePouchdb.updateLocalite(this.pays).then((res) => {\n          this.pays._rev = res.rev;\n        })\n        let toast = this.toastCtl.create({\n          message: 'Pays bien enregistré!',\n          position: 'top',\n          duration: 1000\n        });\n\n        toast.present();\n        this.ajouter = false;\n\n        if(!this.gestion_pays){\n          this.viewCtrl.dismiss();\n        }else{\n          this.liste = true;\n          this.ajouter = false;\n        }\n      }\n    }else if(this.modifier){\n      let loading = this.loadingCtl.create({\n        content: 'Application des changements en cours...'\n      });\n\n      //loading.present();\n      let pays = this.paysForm.value;\n      this.allPays.forEach((p, i) => {\n        if(p.id === pays.id){\n          this.allPays[i] = pays;\n        }\n      });\n\n      this.pays.data = this.allPays;\n      //this.allPays.splice(this.pays.indesOf())\n      this.servicePouchdb.updateLocalite(this.pays).then((res) => {\n          this.pays._rev = res.rev;\n      })\n        //recuperer tous les doc pour modifier le nom du pays\n        /*this.servicePouchdb.getPlageDocsRapide('fuma', 'fuma:\\uffff').then((allDocs) => {\n          allDocs.map((doc) => {\n            //pour les essais\n            *****if(doc.doc.data.type === 'essai' && doc.doc.data.village_producteur === this.ancien_nom ){\n              doc.doc.data0village_producteur = pays.nom;\n              this.servicePouchdb.updateDoc(doc.doc);\n            }else ****\n            //pour les memebres\n            if(doc.doc.data.type === 'membre_op' && doc.doc.data.pays === this.ancien_id ){\n              doc.doc.data.pays_nom = pays.nom;\n              this.servicePouchdb.updateDoc(doc.doc);\n            }\n            else \n            //pour les union\n            if(doc.doc.data.type === 'union' && doc.doc.data.pays === this.ancien_id ){\n              doc.doc.data.pays_nom = pays.nom;\n              this.servicePouchdb.updateDoc(doc.doc);\n            }\n            else \n            //pour les op\n            if(doc.doc.data.type === 'op' && doc.doc.data.pays === this.ancien_id ){\n              doc.doc.data.pays_nom = pays.nom;\n              this.servicePouchdb.updateDoc(doc.doc);\n            }\n           ***** else \n            //pour les champs\n            if(doc.doc.data.type === 'champs' && doc.doc.data.village === this.ancien_nom ){\n              doc.doc.data.village = pays.nom;\n              this.servicePouchdb.updateDoc(doc.doc);\n            }*****\n          });\n\n           let toast = this.toastCtl.create({\n              message: 'Pays bien modifier!',\n              position: 'top',\n              duration: 1000\n            });\n            toast.present();  \n            loading.dismissAll();\n        });*/\n      \n        let toast = this.toastCtl.create({\n          message: 'Pays bien modifier!',\n          position: 'top',\n          duration: 1000\n        });\n        toast.present(); \n\n        this.ajouter = false;\n        this.modifier = false;\n        this.liste = true;\n\n    }\n  } \n\n  ajouterPays(){\n    this.liste = false;\n    this.ajouter = true;\n    this.id = '';\n    this.nom = '';\n  }\n\n  modifierPays(pays){\n\n    this.id = pays.id;\n    this.nom = pays.nom;\n    this.ancien_nom = this.nom;\n    this.ancien_id = this.id;\n    this.liste = false;\n    this.modifier = true;\n  }\n\n  supprimerPays(pays){\n    let e: any = {};\n    let alert = this.alertCtl.create({\n      title: 'Suppression Pays',\n      message: 'Etes vous sûr de supprimer cet pays ?',\n      buttons:[\n        {\n          text: 'Non',\n          handler: () => console.log('suppression annulée')\n \n        },\n        {\n          text: 'Oui',\n          handler: () => {\n            this.allPays.forEach((p, i) => {\n              if(p.id === pays.id){\n                this.allPays.splice(i, 1);\n              }\n            });\n\n            this.pays.data = this.allPays;\n            //this.allPays.splice(this.pays.indesOf())\n            //this.servicePouchdb.updateLocalite(this.pays);\n            this.servicePouchdb.updateLocalite(this.pays).then((res) => {\n                this.pays._rev = res.rev;\n            })\n            let toast = this.toastCtl.create({\n              message: 'Pays bien suprimé!',\n              position: 'top',\n              duration: 1000\n            });\n            toast.present();           \n          }\n        }\n      ]\n    });\n\n    alert.present();\n  }\n\n  annuler(){\n    if(this.gestion_pays){\n      if(this.liste){\n        this.viewCtrl.dismiss();\n      }else if(this.ajouter){\n        this.liste = true;\n        this.ajouter = false;\n      } else{\n        this.liste = true;\n        this.modifier = false;\n      }\n    }else{\n      this.viewCtrl.dismiss();\n    }\n  }\n\n\ngetItems(ev: any) {\n    // Reset items back to all of the items\n    //this.essais = this.allEssais;\n\n    // set val to the value of the searchbar\n    let val = ev.target.value;\n\n    // if the value is an empty string don't filter the items\n    if (val && val.trim() != '') {\n      this.allPays = this.pays.data.filter((item, index) => {\n        return (item.nom.toLowerCase().indexOf(val.toLowerCase()) > -1);\n      });\n    }\n  } \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/localite/ajouter-pays/ajouter-pays.ts"],"sourceRoot":""}