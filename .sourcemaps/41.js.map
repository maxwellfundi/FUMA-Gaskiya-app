{"version":3,"sources":["../../src/pages/protocole/traitement/ajouter-traitement/ajouter-traitement.module.ts","../../src/pages/protocole/traitement/ajouter-traitement/ajouter-traitement.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACa;AAO7D;IAAA;IAA2C,CAAC;IAA/B,2BAA2B;QALvC,uEAAQ,CAAC;YACR,YAAY,EAAE,CAAC,kFAAqB,CAAC;YACrC,OAAO,EAAE,CAAC,sEAAe,CAAC,QAAQ,CAAC,kFAAqB,CAAC,CAAC;YAC1D,OAAO,EAAE,CAAC,kFAAqB,CAAC;SACjC,CAAC;OACW,2BAA2B,CAAI;IAAD,kCAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;;;;;;ACTE;AACgC;AACjB;AAEhB;AACgC;AACzE,sEAAsE;AACxB;AACN;AAExC;;;;;EAKE;AAMF;IAmBE,+BAAmB,OAAsB,EAAS,SAAoB,EAAS,GAAQ,EAAS,MAAc,EAAS,QAAyB,EAAS,cAA+B,EAAS,WAAwB,EAAS,OAAgB;QAA/N,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAS,QAAG,GAAH,GAAG,CAAK;QAAS,WAAM,GAAN,MAAM,CAAQ;QAAS,aAAQ,GAAR,QAAQ,CAAiB;QAAS,mBAAc,GAAd,cAAc,CAAiB;QAAS,gBAAW,GAAX,WAAW,CAAa;QAAS,YAAO,GAAP,OAAO,CAAS;QAhBlP,gBAAW,GAAQ,EAAE,CAAC;QAGtB,SAAI,GAAQ,EAAE,CAAC;QACf,gBAAW,GAAQ,EAAE,CAAC;QAMtB,WAAM,GAAQ,EAAE,CAAC;QACjB,eAAU,GAAQ,EAAE,CAAC;QAGrB,gBAAW,GAAQ,EAAE,CAAC;QAIpB,IAAI,MAAM,GAAG,IAAI,IAAI,EAAE,CAAC;QACxB,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,MAAM,CAAC,QAAQ,EAAE,EAAE,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC;QAEvF,GAAG,EAAC,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,IAAE,EAAE,EAAE,CAAC,EAAE,EAAC,CAAC;YACvB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QAC5B,CAAC;QACD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAEzB,EAAE,EAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,EAAC;YAC5B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC;QACjD,CAAC;QAAA,IAAI,EAAC;YACJ,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,WAAW,EAAE,CAAC;QAC5C,CAAC;QAED,EAAE,EAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,EAAC;YAChC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC;YAC/C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC;YAC/C,+CAA+C;YAC/C,4CAA4C;YAC5C,wDAAwD;QAC1D,CAAC;QAED,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;YAC5C,YAAY;YACX,IAAI,EAAC,CAAC,YAAY,CAAC;YACnB,uBAAuB;YACvB,eAAe,EAAE,CAAC,EAAE,EAAE,kEAAU,CAAC,QAAQ,CAAC;YAC1C,KAAK,EAAE,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;YAC7B,UAAU,EAAE,CAAC,EAAE,EAAE,kEAAU,CAAC,QAAQ,CAAC;YACrC,YAAY,EAAE,CAAC,EAAE,CAAC;YAClB,UAAU,EAAE,CAAC,EAAE,EAAE,kEAAU,CAAC,QAAQ,CAAC;YACrC,cAAc,EAAE,CAAC,EAAE,EAAE,kEAAU,CAAC,QAAQ,CAAC;YACzC,aAAa,EAAE,CAAC,EAAE,CAAC;YACnB,WAAW,EAAE,CAAC,EAAE,EAAE,kEAAU,CAAC,QAAQ,CAAC;YACtC,qCAAqC;YACrC,qCAAqC;YACrC,kBAAkB,EAAE,CAAC,EAAE,CAAC;YACxB,mBAAmB,EAAE,CAAC,EAAE,CAAC;YACzB,KAAK,EAAE,CAAC,KAAK,EAAE,kEAAU,CAAC,QAAQ,CAAC;YACnC,QAAQ,EAAE,CAAC,EAAE,CAAC;YACd,IAAI,EAAE,CAAC,EAAE,CAAC;YACV,WAAW,EAAE,CAAC,EAAE,CAAC;YACjB,KAAK,EAAE,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;YACxB,GAAG,EAAE,CAAC,EAAE,CAAC;SACV,CAAC,CAAC;IAEL,CAAC;IAED,yDAAyB,GAAzB,UAA0B,SAAS;QAClC,GAAG,EAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAC,CAAC;YAC9C,EAAE,EAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC;gBAC1D,IAAI,CAAC,sBAAsB,GAAG,CAAC,CAAC;gBAChC,uDAAuD;gBACvD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;gBAChD,KAAK,CAAC;YACR,CAAC;QACH,CAAC;IACF,CAAC;IAED,6CAAa,GAAb,UAAc,KAAK;QACjB,EAAE,EAAC,KAAK,IAAI,CAAC,CAAC,EAAC;YACb,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,IAAI;YACxD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC;QACxD,CAAC;IACH,CAAC;IAGD,wCAAQ,GAAR,UAAS,KAAK;QACZ,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,sBAAsB,GAAG,CAAC,CAAC,CAAC;QACjC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;IAC/B,CAAC;IACD,gDAAgB,GAAhB,UAAiB,KAAK;QAAtB,iBAkBC;QAjBC,IAAI,CAAC,cAAc,CAAC,kBAAkB,CAAC,gBAAgB,EAAE,uBAAuB,CAAC,CAAC,IAAI,CAAC,UAAC,CAAC;YACvF,EAAE,EAAC,CAAC,CAAC,EAAC;gBACJ,IAAI,IAAE,GAAQ,EAAE,CAAC;gBACjB,CAAC,CAAC,OAAO,CAAC,UAAC,SAAS;oBAClB,EAAE,EAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC,EAAC;wBACpC,IAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;oBACrB,CAAC;gBACH,CAAC,CAAC,CAAC;gBACH,KAAI,CAAC,UAAU,GAAG,IAAE,CAAC;gBAErB,EAAE,EAAC,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,EAAC;oBAChC,KAAI,CAAC,yBAAyB,CAAC,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC;gBAC/D,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IAGL,CAAC;IAED,0CAAU,GAAV,UAAW,IAAS,EAAE,GAAQ,EAAE,KAAU;QACxC,IAAI,CAAC,GAAG,KAAK,GAAC,GAAG,CAAC;QAClB,GAAG,IAAI,CAAC,CAAC;QACT,EAAE,EAAC,GAAG,GAAG,EAAE,CAAC,EAAC;YACX,CAAC,IAAI,GAAG,GAAC,GAAG,GAAC,GAAG,CAAC;QACnB,CAAC;QAAA,IAAI,EAAC;YACJ,CAAC,IAAI,GAAG,GAAC,GAAG,CAAC;QACf,CAAC;QAED,EAAE,EAAC,IAAI,GAAG,EAAE,CAAC,EAAC;YACZ,CAAC,IAAI,GAAG,GAAC,IAAI,CAAC;QAChB,CAAC;QAAA,IAAI,EAAC;YACJ,CAAC,IAAI,IAAI,CAAC;QACZ,CAAC;QACD,MAAM,CAAC,CAAC,CAAC;IACX,CAAC;IAED,+CAAe,GAAf;QAAA,iBA8BC;QA3BC,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,IAAI,CACxB,UAAC,IAAI;YACH,EAAE,EAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,EAAC;gBACxB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAC,QAAQ;oBAC1B,EAAE,EAAC,QAAQ,CAAC,WAAW,CAAC,EAAC;wBACvB,KAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,CAAC;oBAC1C,CAAC;oBACD,EAAE,EAAC,QAAQ,CAAC,QAAQ,CAAC,EAAC;wBACpB,KAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,QAAQ,CAAC;oBAChC,CAAC;gBACH,CAAC,CAAC;YACJ,CAAC;YAAA,IAAI,EAAC;gBACJ,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;gBACpC,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC;YAC5B,CAAC;QAEH,CAAC,EACD,UAAC,GAAG,IAAK,cAAO,CAAC,GAAG,CAAC,0BAA0B,EAAE,GAAG,CAAC,EAA5C,CAA4C,CACtD,CAAC;QAEF,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,iBAAiB,EAAC,wBAAwB,CAAC,CAAC,IAAI,CAAC,UAAC,CAAC;YAChF,KAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QAEzB,CAAC,EAAE,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAhB,CAAgB,CAAC,CAAC;QAE9B,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,aAAa,CAAC;IAE3C,CAAC;IAED,iDAAiB,GAAjB,UAAkB,UAAU;QAC1B,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,UAAC,CAAC,EAAE,KAAK;YAClC,EAAE,EAAC,CAAC,UAAU,CAAC,cAAc,KAAK,CAAC,CAAC,IAAI,CAAC,cAAc,IAAI,UAAU,CAAC,KAAK,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,CAAE,IAAI,CAAC,CAAC,UAAU,CAAC,UAAU,KAAK,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,eAAe,KAAK,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,EAAC;gBAC5M,GAAG,GAAG,CAAC,CAAC;YACV,CAAC;QACH,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IAGD,uCAAO,GAAP;QACE,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;QACtB,IAAI,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;QAC3C,UAAU,CAAC,cAAc,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC;QACxD,UAAU,CAAC,aAAa,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC;QACtD,UAAU,CAAC,WAAW,GAAG,IAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC;QAC5D,kFAAkF;QAClF,kEAAkE;QAClE,EAAE,EAAC,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,EAAC;YAC3C,KAAK,CAAC,4EAA4E,CAAC,CAAC;QACtF,CAAC;QAAA,IAAI,EAAC;YACJ,EAAE,EAAC,CAAC,UAAU,CAAC,WAAW,IAAI,eAAe,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,IAAI,eAAe,IAAI,UAAU,CAAC,YAAY,IAAI,UAAU,CAAC,YAAY,KAAK,EAAE,CAAC,CAAC,EAAC;gBAC1J,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;gBACvC,UAAU,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;gBAC1C,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;gBAC5B,IAAI,EAAE,GAAG,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;gBAC1D,yBAAyB;gBACzB,UAAU,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;gBAC/B,wBAAwB;gBAExB,IAAI,eAAe,GAAQ,EAAE,CAAC;gBAC9B,eAAe,CAAC,GAAG,GAAG,MAAM,GAAE,EAAE,CAAC;gBACjC,eAAe,CAAC,IAAI,GAAG,UAAU;gBACjC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC;gBAC/C;;;;qBAIK;gBAEL,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;gBACnB,oBAAoB;YACtB,CAAC;YAAA,IAAI,EAAC;gBACJ,KAAK,CAAC,oCAAoC,CAAC;YAC7C,CAAC;QAEH,CAAC;IAEH,CAAC;IAED,uCAAO,GAAP;QACE,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;IACrB,CAAC;IAxNU,qBAAqB;QAJjC,wEAAS,CAAC;YACT,QAAQ,EAAE,yBAAyB;WACG;SACvC,CAAC;8BAoBkP;OAnBvO,qBAAqB,CA0NjC;IAAD,CAAC;AAAA;SA1NY,qBAAqB,gB","file":"41.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { AjouterTraitementPage } from './ajouter-traitement';\r\n\r\n@NgModule({\r\n  declarations: [AjouterTraitementPage],\r\n  imports: [IonicPageModule.forChild(AjouterTraitementPage)],\r\n  exports: [AjouterTraitementPage]\r\n})\r\nexport class AjouterTraitementPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/protocole/traitement/ajouter-traitement/ajouter-traitement.module.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams, ToastController, IonicPage } from 'ionic-angular';\nimport { Validators, FormBuilder } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Storage } from '@ionic/storage';\nimport { PouchdbProvider } from '../../../../providers/pouchdb-provider';\n//import { AutoCompletion } from '../../../providers/auto-completion';\nimport { Device } from '@ionic-native/device';\nimport { Sim } from '@ionic-native/sim';\n\n/*\n  Generated class for the AjouterTraitement page.\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n  Ionic pages and navigation.\n*/\n@IonicPage()\n@Component({\n  selector: 'page-ajouter-traitement',\n  templateUrl: 'ajouter-traitement.html'\n})\nexport class AjouterTraitementPage {\n\n  traitementForm: any;\n  producteurs: any = [];\n  selectedAnnee: any;\n  allTraitement: any;\n  imei: any = '';\n  phonenumber: any = '';\n  superficie: any;\n  max_NPR: any;\n  max_NPL: any;\n  protocole: any;\n\n  annees: any = [];\n  protocoles: any = [];\n  selectedProtocole: any;\n  indexSelectedProtocole: number;\n  type_essais: any = '';\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public sim: Sim, public device: Device, public toastCtl: ToastController, public servicePouchdb: PouchdbProvider, public formBuilder: FormBuilder, public storage: Storage) {\n    \n    let maDate = new Date();\n    let today = this.createDate(maDate.getDate(), maDate.getMonth(), maDate.getFullYear());\n\n    for(let i=0; i<=50; i++){\n      this.annees.push(2000 + i)\n    }\n    this.annees.push('Tous');\n\n    if(this.navParams.data.annee){\n      this.selectedAnnee = this.navParams.data.annee;\n    }else{\n      this.selectedAnnee = maDate.getFullYear();\n    }\n\n    if(this.navParams.data.protocole){\n      this.protocole = this.navParams.data.protocole;\n      this.selectedAnnee = this.protocole.data.annee;\n      //this.selectedProtocole = this.protocole.data;\n      //this.setTypeEssais(this.selectedProtocole)\n      //this.type_essais = this.selectedProtocole.type_essais;\n    }\n\n    this.traitementForm = this.formBuilder.group({\n     // _id:[''],\n      type:['traitement'],\n      //nom_traitement: [''],\n      code_traitement: ['', Validators.required],\n      annee: [maDate.getFullYear()],\n      nom_entree: ['', Validators.required],\n      nom_controle: [''],\n      superficie: ['', Validators.required],\n      code_protocole: ['', Validators.required],\n      nom_protocole: [''],\n      type_essais: ['', Validators.required],\n      //max_NPL: ['', Validators.required],\n      //max_NPR: ['', Validators.required],\n      description_entree: [''],\n      objectif_traitement: [''],\n      today: [today, Validators.required],\n      deviceid: [''],\n      imei: [''],\n      phonenumber: [''],\n      start: [maDate.toJSON()],\n      end: ['']\n    });\n    \n  }\n\n  setSelectedProtocoleIndex(protocole){\n   for(let i = 0; i < this.protocoles.length; i++){\n     if(this.protocoles[i].doc.data.code == protocole.data.code){\n       this.indexSelectedProtocole = i;\n       //this.selectedProtocole = this.protocoles[i].doc.data;\n       this.setTypeEssais(this.indexSelectedProtocole);\n       break;\n     }\n   }\n  }\n\n  setTypeEssais(index){\n    if(index >= 0){\n      this.selectedProtocole = this.protocoles[index].doc.data\n      this.type_essais = this.selectedProtocole.type_essais;\n    }\n  }\n\n\n  setAnnee(annee){\n    this.selectedProtocole = null;\n    this.type_essais = '';\n    this.indexSelectedProtocole = -1;\n    this.chargerProtocole(annee);\n  }\n  chargerProtocole(annee){\n    this.servicePouchdb.getPlageDocsRapide('fuma:protocole', 'fuma:protocole:\\uffff').then((p) => {\n      if(p){\n        let ps: any = [];\n        p.forEach((protocole) => {\n          if(protocole.doc.data.annee == annee){\n            ps.push(protocole);\n          }\n        });\n        this.protocoles = ps;\n\n        if(this.navParams.data.protocole){\n          this.setSelectedProtocoleIndex(this.navParams.data.protocole)\n        }\n      }\n    });\n\n\n  }\n\n  createDate(jour: any, moi: any, annee: any){\n    let s = annee+'-';\n    moi += 1;\n    if(moi < 10){\n      s += '0'+moi+'-';\n    }else{\n      s += moi+'-';\n    }\n\n    if(jour < 10){\n      s += '0'+jour;\n    }else{\n      s += jour;\n    }\n    return s;\n  }\n\n  ionViewDidEnter() {\n\n    \n    this.sim.getSimInfo().then(\n      (info) => {\n        if(info.cards.length > 0){\n          info.cards.forEach((infoCard) => {\n            if(infoCard.phoneNumber){\n              this.phonenumber = infoCard.phoneNumber;\n            }\n            if(infoCard.deviceId){\n              this.imei = infoCard.deviceId;\n            }\n          })\n        }else{\n          this.phonenumber = info.phoneNumber;\n          this.imei = info.deviceId;\n        }\n\n      },\n      (err) => console.log('Unable to get sim info: ', err)\n    );\n\n    this.servicePouchdb.getPlageDocs('fuma:traitement','fuma:traitement:\\uffff').then((t) => {\n        this.allTraitement = t;\n\n      }, err => console.log(err));      \n   \n    this.chargerProtocole(this.selectedAnnee)\n    \n  }\n\n  verifierUniqueNon(traitement){\n    let res = 1;\n    this.allTraitement.forEach((t, index) => {\n      if((traitement.code_protocole === t.data.code_protocole && traitement.annee === t.data.annee ) && ((traitement.nom_entree === t.data.nom_entree) || (traitement.code_traitement === t.data.code_traitement))){\n        res = 0;\n      }\n    });\n    return res;\n  }\n  \n\n  ajouter(){\n    let date = new Date();\n    let traitement = this.traitementForm.value;\n    traitement.code_protocole = this.selectedProtocole.code;\n    traitement.nom_protocole = this.selectedProtocole.nom;\n    traitement.type_essais = this.selectedProtocole.type_essais;\n    //traitement.matricule_producteur = this.selectedProducteur.data.matricule_Membre;\n    //champs.nom_producteur = this.selectedProducteur.data.nom_Membre;\n    if(this.verifierUniqueNon(traitement) === 0){\n      alert('Le nom et code du traitement doivent être uniques par protocole et par an!');\n    }else{\n      if((traitement.type_essais == 'sans controle') || (traitement.type_essais == 'avec controle' && traitement.nom_controle && traitement.nom_controle !== '')){\n        traitement.deviceid = this.device.uuid;\n        traitement.phonenumber = this.phonenumber;\n        traitement.imei = this.imei;\n        let id = this.servicePouchdb.generateOderId('traitement');\n        //union._id = 'fuma'+ id;\n        traitement.end = date.toJSON();\n        //champs.id_champs = id;\n  \n        let traitementFinal: any = {};\n        traitementFinal._id = 'fuma'+ id;\n        traitementFinal.data = traitement\n        this.servicePouchdb.createDoc(traitementFinal);\n        /*let toast = this.toastCtl.create({\n          message: 'Traitement bien enregistré!',\n          position: 'top',\n          duration: 1000\n        });*/\n  \n        this.navCtrl.pop();\n        //toast.present();  \n      }else{\n        alert('Le nom du controle est obligatoire')\n      }\n\n    }\n    \n  }\n\n  annuler(){\n    this.navCtrl.pop();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/protocole/traitement/ajouter-traitement/ajouter-traitement.ts"],"sourceRoot":""}